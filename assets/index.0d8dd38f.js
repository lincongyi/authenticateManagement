import{r,j as e,A as Q,aV as U,b6 as i,u as W,a as p,F as m,R as y,C as n,L as X,aY as E,b$ as S,aK as Z,B as f}from"./index.e1f6c22a.js";import{D as ee,d as _}from"./zh-cn.0ce3a149.js";import{r as te,a as ae,d as w}from"./date.75167a8c.js";import{b as ne}from"./ability.05d1734c.js";import{p as ce,q as se}from"./myApp.97d8d13e.js";import ie from"./EnableModal.0b29e8a9.js";import{u as oe}from"./index.9add45ea.js";import{T as re}from"./Table.d58b7c0e.js";import{T as le}from"./index.ea141207.js";import"./index.f89fd048.js";import"./useBreakpoint.d0306603.js";import"./Pagination.f3bb0a48.js";import"./index.8acb433e.js";import"./index.ccade529.js";var ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"};const pe=ue;var de=function(A,l){return e(Q,{...A,ref:l,icon:pe})};const me=r.exports.forwardRef(de),he="_tag_qn393_1",ge="_last_qn393_21",fe="_icon01_qn393_24",Fe="_icon02_qn393_27",ye="_icon03_qn393_30",Ee="_count_qn393_33",o={tag:he,last:ge,icon01:fe,icon02:Fe,icon03:ye,count:Ee},{RangePicker:Ae}=ee,Be=()=>{const[s,A]=r.exports.useState();r.exports.useEffect(()=>{(async()=>{const{data:t}=await ce();A(t)})()},[]);const{dictionaryStore:l,getDictionaryItemName:B}=oe(),[h,T]=r.exports.useState();r.exports.useEffect(()=>{(async()=>{const{data:t}=await ne({type:1});if(!t)return;const c=t.map((a,u)=>({label:a.baseInfo.name,value:a.id}));T(c)})()},[]);const[V,$]=r.exports.useState(),k=t=>{const c=[];for(let a=0;a<t.length;a++)if(a===t.length-1)c.push({...t[a],rowSpan:1});else{const u={...t[a]},d={...t[a+1]};u.appId===d.appId?(c.push({...u,rowSpan:2},{...d,rowSpan:0}),++a):c.push({...u,rowSpan:1})}return c},v=async()=>{const{dateRange:t,...c}=F.getFieldsValue(),a={...c};t&&(a.startTime=_(t[0]).format(w),a.endTime=_(t[1]).format(w));const{data:u}=await se({...a,...g});if(!u)return;const{list:d,pageNum:b,pageSize:G,total:Y}=u,J=k(d);$(J),I({pageNum:b,pageSize:G,total:Y})},[g,I]=r.exports.useState({pageNum:1,pageSize:10,total:0}),z=t=>{const c=t.current||1;I({...g,pageNum:c})};r.exports.useEffect(()=>{v()},[g.pageNum]);const[F]=i.useForm(),H=()=>{I({...g,pageNum:1,pageSize:10}),F.resetFields()},N=async t=>{v()},q=t=>{console.log("Failed:",t)},x=W(),R=()=>{x("./appForm")},O=t=>{x(`./appInfo?appId=${t}`)},[j,D]=r.exports.useState(!1),[C,L]=r.exports.useState(),P=t=>{L(t),D(!0)},M=t=>t?t.split(",").map(u=>{const d=h==null?void 0:h.find(b=>b.value===+u);return(d==null?void 0:d.label)||""}).join(","):"-",K=[{title:"\u5E94\u7528\u540D\u79F0",dataIndex:"appName",ellipsis:!0,onCell:t=>({rowSpan:t.rowSpan})},{title:"\u63A5\u5165\u73AF\u5883",render:t=>p(m,{children:[B("appEnv",t.appEnv),"\u73AF\u5883"]})},{title:"\u5E94\u7528\u7C7B\u578B",render:t=>e(m,{children:B("appType",t.appType)})},{title:"\u5DF2\u63A5\u5165\u57FA\u7840\u80FD\u529B",ellipsis:!0,render:t=>e(m,{children:M(t.accessCapability)})},{title:"clientId",dataIndex:"clientId",ellipsis:!0},{title:"\u72B6\u6001",ellipsis:!0,render:t=>e(m,{children:l.dictionary&&e(le,{color:["success","warning","default","error"][t==null?void 0:t.state]||"success",children:e(m,{children:B("appState",t.state)||"\u6B63\u5E38"})})})},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",ellipsis:!0},{title:"\u64CD\u4F5C",key:"action",width:250,onCell:t=>({rowSpan:t.rowSpan}),render:t=>p(m,{children:[e(f,{type:"link",onClick:()=>O(t.appId),children:"\u67E5\u770B\u8BE6\u60C5"}),e(f,{type:"link",onClick:()=>P(t),children:`\u7533\u8BF7${t.state===3?"\u542F\u7528":"\u505C\u7528"}`})]})}];return p(m,{children:[p(y,{gutter:20,style:{marginBottom:20},children:[e(n,{span:8,children:p("div",{className:`${o.tag} ${o.icon01}`,children:[e("span",{className:`${o.count} font-primary-color`,children:s==null?void 0:s.total}),e("span",{className:"font-secondary-color",children:"\u6211\u7684\u5E94\u7528\u6570"})]})}),e(n,{span:8,children:p("div",{className:`${o.tag} ${o.icon02}`,children:[e("span",{className:`${o.count} font-primary-color`,children:s==null?void 0:s.prod}),e("span",{className:"font-secondary-color",children:"\u6B63\u5F0F\u5E94\u7528"})]})}),e(n,{span:8,children:p("div",{className:`${o.tag} ${o.icon03} ${o.last}`,children:[e("span",{className:`${o.count} font-primary-color`,children:s==null?void 0:s.sit}),e("span",{className:"font-secondary-color",children:"\u6D4B\u8BD5\u5E94\u7528"})]})})]}),e(y,{children:e(n,{span:24,children:e(i,{form:F,name:"search",onFinish:N,onFinishFailed:q,autoComplete:"off",initialValues:{appEnv:null,capabilityId:null,appType:null,state:null},children:p(y,{gutter:20,children:[e(n,{span:6,children:e(i.Item,{label:"\u5E94\u7528\u540D\u79F0",name:"appName",children:e(X,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",maxLength:10})})}),e(n,{span:6,children:l.dictionary&&e(i.Item,{label:"\u63A5\u5165\u73AF\u5883",name:"appEnv",children:e(E,{placeholder:"\u8BF7\u9009\u62E9\u63A5\u5165\u73AF\u5883",fieldNames:S,options:[{dictName:"\u5168\u90E8",dictValue:null},...l.getDictionaryItem("appEnv")]})})}),e(n,{span:6,children:h&&e(i.Item,{label:"\u57FA\u7840\u80FD\u529B",name:"capabilityId",children:e(E,{placeholder:"\u8BF7\u9009\u62E9\u57FA\u7840\u80FD\u529B",options:[{label:"\u5168\u90E8",value:null},...h]})})}),e(n,{span:6,children:l.dictionary&&e(i.Item,{label:"\u5E94\u7528\u7C7B\u578B",name:"appType",children:e(E,{placeholder:"\u8BF7\u9009\u62E9\u5E94\u7528\u7C7B\u578B",fieldNames:S,options:[{dictName:"\u5168\u90E8",dictValue:null},...l.getDictionaryItem("appType")]})})}),e(n,{span:6,children:l.dictionary&&e(i.Item,{label:"\u72B6\u6001",name:"state",children:e(E,{placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",fieldNames:S,options:[{dictName:"\u5168\u90E8",dictValue:null},...l.getDictionaryItem("appState")]})})}),e(n,{span:6,children:e(i.Item,{label:"\u521B\u5EFA\u65F6\u95F4\uFF1A",name:"dateRange",children:e(Ae,{presets:te,disabledDate:ae})})}),e(n,{span:12,className:"tr",children:e(i.Item,{children:p(Z,{children:[e(f,{onClick:H,children:"\u91CD\u7F6E"}),e(f,{type:"primary",htmlType:"submit",children:"\u67E5\u8BE2"})]})})}),e(n,{span:24,className:"tr",children:e(i.Item,{children:e(f,{type:"primary",icon:e(me,{}),onClick:R,children:"\u521B\u5EFA\u5355\u4F4D\u5E94\u7528"})})})]})})})}),e(y,{children:e(n,{span:24,children:e(re,{rowKey:"clientId",columns:K,dataSource:V,pagination:g,onChange:z})})}),C&&e(ie,{open:j,setOpen:D,item:C,callback:()=>N(F.getFieldsValue())})]})},ze=U(Be);export{ze as default};
