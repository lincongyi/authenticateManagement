import{r as s,j as n,A as M,aL as T,m as V,aE as L,a as r,d as N,aK as z,B as W,aM as J,D as X,c as Z,C as S,aN as P,T as $}from"./index.116a6914.js";import{g as ee,q as Q}from"./devDocument.14e0e63c.js";import{T as te,F as oe}from"./index.3f546e1e.js";import"./index.5edc87f0.js";var ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};const Ae=ne;var ce=function(m,d){return n(M,{...m,ref:d,icon:Ae})};const ae=s.exports.forwardRef(ce),re="_header_xqo4o_1",se="_container_xqo4o_14",le="_title_xqo4o_25",ie="_content_xqo4o_53",a={header:re,container:se,"left-side":"_left-side_xqo4o_18",title:le,"catalog-title":"_catalog-title_xqo4o_47",content:ie,"catalog-content":"_catalog-content_xqo4o_57","doc-wrap":"_doc-wrap_xqo4o_66","doc-content":"_doc-content_xqo4o_72","download-content":"_download-content_xqo4o_84","btn-grad":"_btn-grad_xqo4o_94","download-title":"_download-title_xqo4o_99","download-item":"_download-item_xqo4o_104","doc-tabs":"_doc-tabs_xqo4o_110"},F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAAEAAAAABiIBAZAAABZUlEQVQoFY2Tv0vDQBTHv+9aB5EuDo4pDsWhtrs4WlBwUTGtIPgfODn6Dzi46e4kSgtuOmhddOyWVlEQbCod1aEoKCbPd2mP9rREj5D36/u5d3fJkePWnwEeR/x4J1DRr+ROjYwc12NA7SBBVZO0bBBsglAgphHJrxg4GYkEah1nLy2gF6SL3jJAFwLfgnGSdusRrIaJf+UYSb+c2xZ4V2oaXux2NLO73iETZXQoS7v2K9Nb2mfwgpxFTfakH0WEfQskhSoxGpFY8X1kGQeibGtfj5DQFHoW+nCctZu5bvrv92SpseEUvbbV0Sl5LrGaGI6Hj345f2ZqFogQ67KHKVMctLK8K4mHg61KfmlQHOdbHWfcp9GX1JuVM3Awlvh82Mt8mNgStfFaQwdZU7Rsh84lnjc5C1RJrKpQpUxx0H4lQvmn+8MCm0f5u34p3uuCARfkW8Yre1UOg2grcjv+da1+Tlr/Bp/1cz7qiUZWAAAAAElFTkSuQmCC",b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAA0klEQVQ4EWNgoBAwyoVdKmf4z1APNIcTbBYj4z8Ghv9r2Vg5i+4sVX1CyHxGudBL3xgYGY4yMjDuBCv+zyAANCCHgYGRAyj+AbcB/7//Z2BqYwEq4GRkYNrwcJXOVJhi5dg7k37/+JYBNJQXJoZB/2f0AlrUBzIACP47yoddeQFhMzD8+fmDgZGR6SqMj43+z/BfD6hPC+SF/9gUECvGRKxCXOpGDWBgGAxhwMjwHlcUERQH6mVh/M+YzMD4v4zhPyMXQQ3IChj/fwPq6UIWIosNAGYeNQ6pSux7AAAAAElFTkSuQmCC",{Link:de}=$,me=()=>{var C;const[i,m]=s.exports.useState(),[d,_]=s.exports.useState(),u=(e,t)=>{var o,A;if(!(!Array.isArray(e)||!e.length))if(t){for(let c=0;c<e.length;c++)if(e[c].leafDirectory&&((o=e[c].leafDirectory)==null?void 0:o.length)){const f=u(e[c].leafDirectory,t);if(f)return f}else if(e[c].id===t)return e[c]}else return(A=e[0].leafDirectory)!=null&&A.length?u(e[0].leafDirectory):e[0]},y=async(e,t)=>{const{directoryList:o}=e;let A;if(t?A=u(o,t):A=u(o),A){v(A);try{const{data:c}=await Q({id:A.id});h((c==null?void 0:c.annexUrl)||void 0),g((c==null?void 0:c.htmlContent)||void 0)}catch{h(void 0),g(void 0)}}else v(void 0),h(void 0),g(void 0)},D=e=>e.map(t=>{if(!t.leafDirectory||!t.leafDirectory.length)return{...t,icon:t.type==="Folder"?n("img",{src:b}):n("img",{src:F})};{const{leafDirectory:o,...A}=t;return{...A,leafDirectory:D(o),icon:t.type==="Folder"?n("img",{src:b}):n("img",{src:F})}}}),[p]=T(),x=e=>e.reduce((t,o)=>{var A;return o.leafDirectory&&((A=o.leafDirectory)==null?void 0:A.length)?[...t,o.id,...x(o.leafDirectory)]:t},[]),[G,K]=V.useMessage();s.exports.useEffect(()=>{(async()=>{const{data:e}=await ee();if(!e)return;if(!e.length)return G.warning("\u5E94\u7528\u9700\u8981\u81F3\u5C11\u63A5\u5165\u4E00\u4E2A\u57FA\u7840\u80FD\u529B\u624D\u80FD\u67E5\u770B\u5F00\u53D1\u6587\u6863\u5185\u5BB9");m(e);let t=e[0];if(p.size){const f=+p.get("projectId");t=e.find(Y=>Y.projectId===f)}const o=Number(p.get("directoryId"));o?y(t,o):y(t),H(t.projectId.toString());const{directoryList:A}=t;B(x(A));const c=D(A);_(c)})()},[]);const j=e=>{const t=i==null?void 0:i.find(A=>A.projectId===+e);if(!t)return!1;y(t),B(x(t.directoryList));const o=D(t.directoryList);_(o)},q=L(),R=()=>{q("./searchDocument")},[U,H]=s.exports.useState(),[l,v]=s.exports.useState(),[I,B]=s.exports.useState(),[w,g]=s.exports.useState(),[E,h]=s.exports.useState(),O=async(e,t)=>{if(!t.selected||(v(t.node),t.node.type==="Folder"))return;const{data:o}=await Q({id:e[0]});h((o==null?void 0:o.annexUrl)||void 0),g((o==null?void 0:o.htmlContent)||void 0)},k=e=>{B(e)};return r(N,{children:[K,r("div",{className:a.header,children:[n("div",{className:a["left-side"],children:d&&r(N,{children:["\u9879\u76EE\uFF1A",i&&n(z,{tabBarGutter:0,className:a["doc-tabs"],defaultActiveKey:U,style:{width:"calc(100% - 80px)"},onChange:j,items:i.map(e=>({label:e.projectName,key:e.projectId.toString()}))})]})}),n(W,{size:"large",type:"primary",icon:n(J,{}),onClick:R,children:"\u6587\u6863\u641C\u7D22"})]}),n(X,{}),r(Z,{className:a.container,children:[r(S,{lg:6,xl:6,xxl:4,children:[n("div",{className:`${a.title} ${a["catalog-title"]}`,children:"\u76EE\u5F55"}),n("div",{className:`${a.content} ${a["catalog-content"]}`,children:d&&!!d.length&&l&&n(te,{fieldNames:{title:"name",key:"id",children:"leafDirectory"},blockNode:!0,showIcon:!0,selectedKeys:[l.id],expandedKeys:I,onSelect:O,treeData:d,onExpand:e=>k(e)})})]}),r(S,{lg:18,xl:18,xxl:20,children:[n("div",{className:a.title,children:!((C=l==null?void 0:l.leafDirectory)!=null&&C.length)&&(l==null?void 0:l.name)}),r("div",{className:a["doc-wrap"],children:[w&&n("div",{className:`${a["doc-content"]} markdown-body`,dangerouslySetInnerHTML:{__html:w}}),E&&!!E.length&&r("div",{className:a["download-content"],children:[r("p",{className:a["download-title"],children:[n(ae,{}),"\u6587\u4EF6\u4E0B\u8F7D"]}),n("ul",{children:E.map(e=>r("li",{className:a["download-item"],children:[r("div",{className:a["left-side"],children:[n(oe,{style:{marginRight:4}}),e.name]}),n("div",{className:a["right-side"],children:r(de,{href:e.url,target:"_blank",children:[n(P,{style:{marginRight:4}}),"\u70B9\u51FB\u4E0B\u8F7D"]})})]},e.id))})]})]})]})]})]})};export{me as default};
