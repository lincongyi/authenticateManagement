{"version":3,"file":"CheckModal.aead88dd.js","sources":["../../src/pages/Register/Tour/components/CheckModal.tsx"],"sourcesContent":["import React from 'react'\r\nimport { Button, Divider, Form, Input, Modal, Space, message } from 'antd'\r\nimport { useStore } from '@stores/index'\r\nimport { getProcessByKey } from '@api/index'\r\n\r\nconst CheckModal = ({\r\n  open,\r\n  setOpen,\r\n  toResult\r\n}: {\r\n  open: boolean\r\n  setOpen: Function\r\n  toResult: Function\r\n}) => {\r\n  const [form] = Form.useForm()\r\n\r\n  /**\r\n   * 关闭\r\n   */\r\n  const onCancel = () => {\r\n    form.resetFields()\r\n    setOpen(false)\r\n  }\r\n\r\n  const { registerStore } = useStore()\r\n\r\n  /**\r\n   * 提交\r\n   */\r\n  const onFinish = async (values: any) => {\r\n    const { data } = await getProcessByKey({\r\n      userId: values.accountNumber,\r\n      key: 'ACCESS_REGISTER'\r\n    })\r\n    if (!data) return message.warning('并未查询到该用户的注册结果')\r\n    const { taskId } = data\r\n    const { state, processInstanceId, starter, comment } = data!.instanceInfo\r\n    // 注册申请信息\r\n    registerStore.setRegisterInfo({\r\n      taskId,\r\n      state,\r\n      processInstanceId,\r\n      starter,\r\n      comment\r\n    })\r\n    onCancel()\r\n    toResult()\r\n  }\r\n  const onFinishFailed = (errorInfo: any) => {\r\n    console.log(errorInfo)\r\n  }\r\n  return (\r\n    <Modal\r\n      title='查询注册申请结果'\r\n      open={open}\r\n      width={640}\r\n      onCancel={onCancel}\r\n      footer={[]}\r\n    >\r\n      <Divider />\r\n      <Form\r\n        form={form}\r\n        name='check'\r\n        labelCol={{ span: 4 }}\r\n        wrapperCol={{ span: 20 }}\r\n        colon={false}\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        autoComplete='off'\r\n      >\r\n        <Form.Item\r\n          name='accountNumber'\r\n          label='账户登录名'\r\n          rules={[{ required: true, message: '请输入账户登录名' }]}\r\n        >\r\n          <Input showCount maxLength={20} />\r\n        </Form.Item>\r\n        <Form.Item wrapperCol={{ span: 20, offset: 4 }}>\r\n          <Space>\r\n            <Button onClick={onCancel}>关闭</Button>\r\n            <Button type='primary' htmlType='submit'>\r\n              提交\r\n            </Button>\r\n          </Space>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default CheckModal\r\n"],"names":["CheckModal","open","setOpen","toResult","form","Form","useForm","onCancel","resetFields","registerStore","useStore","Modal","_jsx","Divider","span","values","data","getProcessByKey","userId","accountNumber","key","message","warning","taskId","state","processInstanceId","starter","comment","instanceInfo","setRegisterInfo","errorInfo","console","log","required","Input","offset","Space","Button"],"mappings":"8IAKA,MAAMA,EAAa,CAAC,CAClBC,KAAAA,EACAC,QAAAA,EACAC,SAAAA,CAKF,IAAM,CACJ,KAAM,CAACC,CAAI,EAAIC,EAAKC,QAAS,EAKvBC,EAAW,IAAM,CACrBH,EAAKI,YAAa,EAClBN,EAAQ,EAAK,CAAA,EAGT,CAAEO,cAAAA,GAAkBC,EAAU,EA2BpC,SACGC,EAAK,CACJ,MAAM,mDACN,KAAAV,EACA,MAAO,IACP,SAAAM,EACA,OAAQ,CAAG,EAAA,SAAA,CAEVK,EAAAC,EAAU,CAAA,CAAA,IACVR,EAAI,CACH,KAAAD,EACA,KAAK,QACL,SAAU,CAAEU,KAAM,CAAE,EACpB,WAAY,CAAEA,KAAM,EAAG,EACvB,MAAO,GACP,SArCW,MAAOC,GAAgB,CAChC,KAAA,CAAEC,KAAAA,CAAK,EAAI,MAAMC,EAAgB,CACrCC,OAAQH,EAAOI,cACfC,IAAK,iBAAA,CACN,EACD,GAAI,CAACJ,EAAaK,OAAAA,EAAQC,QAAQ,gFAAe,EAC3C,KAAA,CAAEC,OAAAA,CAAWP,EAAAA,EACb,CAAEQ,MAAAA,EAAOC,kBAAAA,EAAmBC,QAAAA,EAASC,QAAAA,CAAAA,EAAYX,EAAMY,aAE7DnB,EAAcoB,gBAAgB,CAC5BN,OAAAA,EACAC,MAAAA,EACAC,kBAAAA,EACAC,QAAAA,EACAC,QAAAA,CAAAA,CACD,EACSpB,IACAJ,GAAA,EAqBN,eAnBkB2B,GAAmB,CACzCC,QAAQC,IAAIF,CAAS,CAAA,EAmBjB,aAAa,MAAK,SAElB,CAAClB,EAAAP,EAAK,KAAI,CACR,KAAK,gBACL,MAAM,iCACN,MAAO,CAAC,CAAE4B,SAAU,GAAMZ,QAAS,kDAAA,CAAY,EAAE,WAEhDa,EAAK,CAAC,UAAS,GAAC,UAAW,EAAA,CAAG,CAAA,CAAG,EAEnCtB,EAAAP,EAAK,KAAI,CAAC,WAAY,CAAES,KAAM,GAAIqB,OAAQ,CAAE,EAAE,WAC5CC,EAAK,CAAA,SAAA,CACJxB,EAACyB,EAAM,CAAC,QAAS9B,EAAS,SAAA,cAAA,CAAY,EACtCK,EAACyB,EAAM,CAAC,KAAK,UAAU,SAAS,SAAQ,SAAA,cAAA,CAE/B,CAAA,CAAA,CAAA,CAAA,CAED,CAAA,CAAA,CACP,CAAA,CAAA,CACD,CAEZ"}