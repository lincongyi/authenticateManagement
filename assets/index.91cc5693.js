import{b as V,u as _,r as p,b6 as i,m as D,J as Y,a as s,F as g,j as e,B as E,D as J,N as x,bj as f,c3 as W}from"./index.e1f6c22a.js";import{g as P}from"./ability.05d1734c.js";import{b as K}from"./myApp.97d8d13e.js";import{U}from"./UploadOutlined.729c023c.js";const k="_header_zn0qe_1",j="_title_zn0qe_6",O="_section_zn0qe_17",H="_guide_zn0qe_27",Z="_step_zn0qe_36",$="_icon01_zn0qe_58",ee="_icon02_zn0qe_61",ue="_icon03_zn0qe_64",Ae="_arrow_zn0qe_67",se="_download_zn0qe_81",A={header:k,title:j,section:O,guide:H,step:Z,"step-item":"_step-item_zn0qe_40","step-icon":"_step-icon_zn0qe_53",icon01:$,icon02:ee,icon03:ue,arrow:Ae,download:se},te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAACwUlEQVRIDb1WXUgUURT+7szkWu6qsYZmEtGGKUUIvQQVGEYhkpZQCUYQ0UtB6UsQPUT01ENRJPRSLIRRRBQK+9BDPQgFS0IP0Q+R1JYaxQpqu2vq7tzOmWmGmd3ZXe3vPuzcc+93vu/cM2fOXYECY7S7sy6dyXQAehsgQkKiluFSYJx+RwAloqnqQN3tB6P5aITXxqeu9lop5XkiPSIhVS+MtSYgMiQWFkKcW313kITdI0eAyNt1iX5yCrihxSzxXRE4RCKDTqTiNGJdHScl8HDx5MwiA+zLHE5O+wQcOQMoNS5RJ3ghc0qVTqT7rJMYApxzSsvb34vcS9ZIVwO/EyNa84UWznnFgW6s6ruJ0k1NXoxZa5Quo0ioTLgUM+n0x2LVsvLiVaSeR6HV1GCi73IWYa7J1aVq2hrNrPPCpcjuMp2GFgzSJ0FvagGDA2ZuShF/RMXHXOwDyrbvwPznWHGwjdDbSECEbLvARJ+egtA0qFUrCqCyt0RIsT7/7C2XTcT+5p2YGriPQMsu+NY3urbzGcyt5dt0rvspNfqPGUzeuQU9mUT12QtIDD2BKPFBzs8h+XQIs69fOl3suWI2LtvOnagqyvfux3RkAMu2bEXJ2nXU4wT8LbuhVlYiMxFH8NiJXD9aYW46AXdF1HshlEA5lh8+iiXVNajoPIi59++QGo5i8l4/Shs3omxbMwKte5CKPvNyZ4kRElAiVEmt2QhffQOqTp0GV0/621d8OdNjpMfCJcbHkHj8yDLzPJWIwv3cbLluTPB4D2ZeDFOkGxC/fsVF7kZ6W8zJ3Ip5WchwNmz2zSssbdqM+LVL4Pnihwwz9/9pdkbXo8uCW+3iI3V7MMevi8e43ezeb/Zv0fsnIqav6LXuApY2UuSM4Z9emSzE6nTEBlK+4VVdzmB4zhjGso8zcguXcwJrg59/42/LT4MDFQNlOfGQAAAAAElFTkSuQmCC",ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAACt0lEQVRIDbWWTWhTQRDH//veS4yNXry0BD+KIjbFg1iC9uYHKYSCUqHiQURBD15acumpIF5706uCF+9FQTzk2CIi5hCtJSKVHtoIigiWhGjz3jqzm03eS15i2uhe9u1k9jezs7MzEegyMnOVg7Xf8jIkJqUUx0g1UVcvCSHXIPDCiYpnLxcGNjphRNgP6blyAlXcB8QtCWmH6RiZgHAB+QQx3MstxEtGbuY2A+nZ8iUJ8RRS7jdKPc1CbAnI67kH8ed+fcu/mJitzJDXizuGM0Q5JBY1o0ltnIA9Z7iUMmC0qdrblxDCI2tT5iTKAMdc/hLFXXkeZpfDtUeO8J1ob/lCdxrzMLCRMUslCcVEpWIV63/LFrO315mzy4lh2OI8D4Nnr0Uxfd4J8G5kIrg7FQnIMmdtzN+MBmS8YCazLX5Ebb+S4MdPicx40EBm3FYyx/cyJs442KrIMARbmbTqL7RNYalQw6FBC0MHdKIdHtTz5jeJ0WF9dfG9QJK+lwr01kIGs1nTPP+AytqmxJfvHlKj2t2xERv5ooe3RRenT9RlNFeqQOETZWb4SHTN+WXyLJXUKmMEY3heGdCyVNLG6xUXbkc+wJpt9cM4wwZOHbcRozs8edRS8A+fPRwZsrCPwsMGOoWnzihZqioaYsu8uu6pEFy9GMHGV48uE9imcK+QkSvnIhiIQZ2qZVtjyWyLS25DEvLx6n0N0xccAjXjkP/oKtmbVRfbtZBNRkRsi+u5LrlGGpw5BLGoCHjK98Cy5Xfh2cME9dAUmxbpmfIjyuTbQXR/K0rqx7mH8Ts6HahZgApUf0jfbmYxk4YywFWPm4UutT7FXXwyQzWeenfTJyAQ1286VrYfIxqOrOkF7J9+/z5P/2vLZDvqJNQs+JK6ZZfxiXWULjeYln7MOm0nMBt5/hd/W/4ASVkTeBZ5+koAAAAASUVORK5CYII=",ne=()=>{const[n]=V(),B=_(),q=n.get("appId"),M=n.get("env"),C=n.get("clientId"),r=Number(n.get("capabilityId")),[h,S]=p.exports.useState();(!C||!r)&&B(-1),p.exports.useEffect(()=>{(async()=>{const{data:u}=await P({id:r});!u||S(u)})()},[]);const[a]=i.useForm(),w={labelCol:{span:6},wrapperCol:{span:12},autoComplete:"off"},[I,y]=p.exports.useState(),[N,b]=p.exports.useState(),[v,X]=D.useMessage(),Q=(u,l=1)=>{const{name:c}=u,F=c.substring(c.lastIndexOf(".")+1),t=["doc","docx","pdf","png","jpg"].includes(F);t||v.error(`\u4E0D\u652F\u6301\u4E0A\u4F20${F}\u683C\u5F0F\u6587\u4EF6`);const m=u.size/1024/1024<l;return m||D.error(`\u56FE\u7247\u6587\u4EF6\u5927\u5C0F<${l}MB`),t&&m||f.LIST_IGNORE};let o;const R=async(u,l)=>{const c=new FormData,{file:F}=u;c.append("file",F);try{const{data:t}=await W(c);if(!t)return;const{fileName:m,url:L}=t;o={uid:u.file.uid,name:m,status:"done",url:L}}catch(t){console.log("error",t),o={uid:u.file.uid,name:u.file.name,status:"error",url:""}}finally{l?b([o]):y([o]),a.setFieldValue(l?"applyLetter":"applyFile",o.url)}},z=u=>{u?(b(void 0),a.setFieldValue("applyLetter",void 0)):(y(void 0),a.setFieldValue("applyFile",void 0))},G=async()=>{try{await a.validateFields();const u={...a.getFieldsValue(),applyFileName:I[0].name,applyLetterName:N[0].name,capabilityId:r,clientId:C};await K(u),v.success({content:"\u63D0\u4EA4\u6210\u529F",onClose:()=>B(`..?appId=${q}&capabilityId=${r}&env=${M}`)})}catch(u){console.log(u)}},{themeStore:T}=Y(),d=T.antdThemeColor;return s(g,{children:[X,s("div",{className:A.header,children:[s("div",{className:A.title,children:["\u4E0A\u4F20\u7533\u8BF7\u8868 - ",h==null?void 0:h.name]}),e(E,{type:"primary",onClick:G,children:"\u63D0\u4EA4"})]}),e(J,{}),s("div",{className:A.section,children:[e("div",{className:A.guide,children:"\u64CD\u4F5C\u6307\u5F15"}),s("div",{className:A.step,children:[s("div",{className:A["step-item"],children:[e("i",{className:`${A["step-icon"]} ${A.icon01}`}),"\u4E0B\u8F7D\u7533\u8BF7\u8868"]}),e("div",{className:A.arrow}),s("div",{className:A["step-item"],children:[e("i",{className:`${A["step-icon"]} ${A.icon02}`}),"\u7EBF\u4E0B\u5370\u7AE0"]}),e("div",{className:A.arrow}),s("div",{className:A["step-item"],children:[e("i",{className:`${A["step-icon"]} ${A.icon03}`}),"\u4E0A\u4F20\u626B\u63CF\u4EF6"]})]})]}),e("div",{className:A.section,children:s(i,{form:a,name:"uploadForm",...w,children:[e(i.Item,{label:"\u7533\u8BF7\u8868\u4E0B\u8F7D\uFF1A",children:s("div",{className:"flex primary-color",children:[e("img",{src:te}),"\u300A\u57FA\u7840\u80FD\u529B\u63A5\u5165\u7533\u8BF7\u8868.pdf\u300B",s("div",{className:A.download,children:[e(x,{}),"\u4E0B\u8F7D"]})]})}),e(i.Item,{label:"\u7533\u8BF7\u51FD\u4E0B\u8F7D\uFF1A",children:s("div",{className:"flex primary-color",children:[e("img",{src:ae}),"\u300A\u57FA\u7840\u80FD\u529B\u63A5\u5165\u7533\u8BF7\u51FD.docx\u300B",s("div",{className:A.download,children:[e(x,{}),"\u4E0B\u8F7D"]})]})}),e(i.Item,{name:"applyFile",label:"\uFF08\u9644\u5370\u7AE0\uFF09\u57FA\u7840\u80FD\u529B\u63A5\u5165\u7533\u8BF7\u8868\uFF1A",extra:s(g,{children:[e("p",{children:"\u652F\u6301\u6587\u4EF6\u683C\u5F0F\uFF1Adoc/docx/pdf/png/jpg"}),e("p",{children:"\u652F\u6301\u6587\u4EF6\u5927\u5C0F\uFF1A1Mb"})]}),rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u7533\u8BF7\u8868"}],children:e(f,{maxCount:1,fileList:I,beforeUpload:u=>Q(u),customRequest:u=>R(u,0),onRemove:()=>z(0),children:e(E,{icon:e(U,{}),style:{color:d,borderColor:d},children:"\u4E0A\u4F20\u6587\u4EF6"})})}),e(i.Item,{name:"applyLetter",label:"\uFF08\u9644\u5370\u7AE0\uFF09\u57FA\u7840\u80FD\u529B\u63A5\u5165\u7533\u8BF7\u51FD\uFF1A",extra:s(g,{children:[e("p",{children:"\u652F\u6301\u6587\u4EF6\u683C\u5F0F\uFF1Adoc/docx/pdf/png/jpg"}),e("p",{children:"\u652F\u6301\u6587\u4EF6\u5927\u5C0F\uFF1A1Mb"})]}),rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u7533\u8BF7\u8868"}],children:e(f,{maxCount:1,fileList:N,beforeUpload:u=>Q(u),customRequest:u=>R(u,1),onRemove:()=>z(1),children:e(E,{icon:e(U,{}),style:{color:d,borderColor:d},children:"\u4E0A\u4F20\u6587\u4EF6"})})})]})})]})};export{ne as default};
