import{r as l,j as c,A as M,b4 as V,m as L,aI as z,a as r,d as C,B as W,b5 as J,c as X,C as S,b6 as Z}from"./index.43a2e21b.js";import{g as P,q as N}from"./devDocument.1fdffa97.js";import{T as q}from"./index.0dc04abc.js";import{D as $}from"./index.81432aeb.js";import{T as ee,F as te}from"./index.b521ac0f.js";import{T as ae}from"./index.741fa87b.js";import"./index.57166d9e.js";import"./EditOutlined.020e8724.js";import"./styleChecker.94b62444.js";var oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};const ce=oe;var ne=function(f,d){return c(M,{...f,ref:d,icon:ce})};const Ae=l.exports.forwardRef(ne),re="_header_1cbxd_1",le="_container_1cbxd_14",se="_title_1cbxd_25",ie="_content_1cbxd_53",n={header:re,container:le,"left-side":"_left-side_1cbxd_18",title:se,"catalog-title":"_catalog-title_1cbxd_47",content:ie,"catalog-content":"_catalog-content_1cbxd_57","doc-wrap":"_doc-wrap_1cbxd_66","doc-content":"_doc-content_1cbxd_72","download-content":"_download-content_1cbxd_78","btn-grad":"_btn-grad_1cbxd_88","download-title":"_download-title_1cbxd_93","download-item":"_download-item_1cbxd_98","doc-tabs":"_doc-tabs_1cbxd_104"},Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAAEAAAAABiIBAZAAABZUlEQVQoFY2Tv0vDQBTHv+9aB5EuDo4pDsWhtrs4WlBwUTGtIPgfODn6Dzi46e4kSgtuOmhddOyWVlEQbCod1aEoKCbPd2mP9rREj5D36/u5d3fJkePWnwEeR/x4J1DRr+ROjYwc12NA7SBBVZO0bBBsglAgphHJrxg4GYkEah1nLy2gF6SL3jJAFwLfgnGSdusRrIaJf+UYSb+c2xZ4V2oaXux2NLO73iETZXQoS7v2K9Nb2mfwgpxFTfakH0WEfQskhSoxGpFY8X1kGQeibGtfj5DQFHoW+nCctZu5bvrv92SpseEUvbbV0Sl5LrGaGI6Hj345f2ZqFogQ67KHKVMctLK8K4mHg61KfmlQHOdbHWfcp9GX1JuVM3Awlvh82Mt8mNgStfFaQwdZU7Rsh84lnjc5C1RJrKpQpUxx0H4lQvmn+8MCm0f5u34p3uuCARfkW8Yre1UOg2grcjv+da1+Tlr/Bp/1cz7qiUZWAAAAAElFTkSuQmCC",F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAA0klEQVQ4EWNgoBAwyoVdKmf4z1APNIcTbBYj4z8Ghv9r2Vg5i+4sVX1CyHxGudBL3xgYGY4yMjDuBCv+zyAANCCHgYGRAyj+AbcB/7//Z2BqYwEq4GRkYNrwcJXOVJhi5dg7k37/+JYBNJQXJoZB/2f0AlrUBzIACP47yoddeQFhMzD8+fmDgZGR6SqMj43+z/BfD6hPC+SF/9gUECvGRKxCXOpGDWBgGAxhwMjwHlcUERQH6mVh/M+YzMD4v4zhPyMXQQ3IChj/fwPq6UIWIosNAGYeNQ6pSux7AAAAAElFTkSuQmCC",{Link:de}=ae,be=()=>{var w;const[i,f]=l.exports.useState(),[d,B]=l.exports.useState(),u=(e,t)=>{var o,a;if(!!Array.isArray(e))if(t){for(let A=0;A<e.length;A++)if(e[A].leafDirectory&&((o=e[A].leafDirectory)==null?void 0:o.length)){const g=u(e[A].leafDirectory,t);if(g)return g}else if(e[A].id===t)return e[A]}else return(a=e[0].leafDirectory)!=null&&a.length?u(e[0].leafDirectory):e[0]},m=async(e,t)=>{const{directoryList:o}=e;let a;if(t?a=u(o,t):a=u(o),a){E(a);try{const{data:A}=await N({id:a.id});if(!A)return;b(A.annexUrl),v(A.htmlContent)}catch{b(void 0),v(void 0)}}},h=e=>e.map(t=>{if(!t.leafDirectory||!t.leafDirectory.length)return{...t,icon:t.type==="Folder"?c("img",{src:F}):c("img",{src:Q})};{const{leafDirectory:o,...a}=t;return{...a,leafDirectory:h(o),icon:t.type==="Folder"?c("img",{src:F}):c("img",{src:Q})}}}),[y]=V(),p=e=>e.reduce((t,o)=>{var a;return o.leafDirectory&&((a=o.leafDirectory)==null?void 0:a.length)?[...t,o.id,...p(o.leafDirectory)]:t},[]),[G,K]=L.useMessage();l.exports.useEffect(()=>{(async()=>{const{data:e}=await P();if(!e)return;if(!e.length)return G.warning("\u5E94\u7528\u9700\u8981\u81F3\u5C11\u63A5\u5165\u4E00\u4E2A\u57FA\u7840\u80FD\u529B\u624D\u80FD\u67E5\u770B\u5F00\u53D1\u6587\u6863\u5185\u5BB9");f(e);let t=e[0];if(y.size){const g=+y.get("capabilityId");t=e.find(j=>j.capabilityId===g)}const o=Number(y.get("directoryId"));o?m(t,o):m(t),O(t.capabilityId.toString());const{directoryList:a}=t;D(p(a));const A=h(a);B(A)})()},[]);const R=e=>{const t=i==null?void 0:i.find(a=>a.capabilityId===+e);if(!t)return!1;m(t),D(p(t.directoryList));const o=h(t.directoryList);B(o)},U=z(),I=()=>{U("./searchDocument")},[H,O]=l.exports.useState(),[s,E]=l.exports.useState(),[k,D]=l.exports.useState(),[_,v]=l.exports.useState(),[x,b]=l.exports.useState(),Y=async(e,t)=>{var o;if(E(t.node),!((o=t.node.leafDirectory)!=null&&o.length)){const{data:a}=await N({id:e[0]});b(a==null?void 0:a.annexUrl)}},T=e=>{D(e)};return r(C,{children:[K,r("div",{className:n.header,children:[c("div",{className:n["left-side"],children:d&&r(C,{children:["\u9879\u76EE\uFF1A",i&&c(q,{tabBarGutter:0,className:n["doc-tabs"],defaultActiveKey:H,style:{width:"calc(100% - 80px)"},onChange:R,items:i.map(e=>({label:e.projectName,key:e.capabilityId.toString()}))})]})}),c(W,{size:"large",type:"primary",icon:c(J,{}),onClick:I,children:"\u6587\u6863\u641C\u7D22"})]}),c($,{}),r(X,{className:n.container,children:[r(S,{lg:6,xl:6,xxl:4,children:[c("div",{className:`${n.title} ${n["catalog-title"]}`,children:"\u76EE\u5F55"}),c("div",{className:`${n.content} ${n["catalog-content"]}`,children:d&&!!d.length&&s&&c(ee,{fieldNames:{title:"name",key:"id",children:"leafDirectory"},blockNode:!0,showIcon:!0,selectedKeys:[s.id],expandedKeys:k,onSelect:Y,treeData:d,onExpand:e=>T(e)})})]}),r(S,{lg:18,xl:18,xxl:20,children:[c("div",{className:n.title,children:!((w=s==null?void 0:s.leafDirectory)!=null&&w.length)&&(s==null?void 0:s.name)}),r("div",{className:n["doc-wrap"],children:[_&&c("div",{className:`${n["doc-content"]} markdown-body`,dangerouslySetInnerHTML:{__html:_}}),x&&!!x.length&&r("div",{className:n["download-content"],children:[r("p",{className:n["download-title"],children:[c(Ae,{}),"\u6587\u4EF6\u4E0B\u8F7D"]}),c("ul",{children:x.map(e=>r("li",{className:n["download-item"],children:[r("div",{className:n["left-side"],children:[c(te,{style:{marginRight:4}}),e.name]}),c("div",{className:n["right-side"],children:r(de,{href:e.url,target:"_blank",children:[c(Z,{style:{marginRight:4}}),"\u70B9\u51FB\u4E0B\u8F7D"]})})]},e.id))})]})]})]})]})]})};export{be as default};
