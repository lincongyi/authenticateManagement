{"version":3,"file":"index.d523e247.js","sources":["../../node_modules/antd/es/_util/throttleByAnimationFrame.js","../../node_modules/antd/es/affix/style/index.js","../../node_modules/antd/es/affix/utils.js","../../node_modules/antd/es/affix/index.js","../../src/pages/AccessForm/index.tsx"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport raf from \"rc-util/es/raf\";\nfunction throttleByAnimationFrame(fn) {\n  let requestId;\n  const later = args => () => {\n    requestId = null;\n    fn.apply(void 0, _toConsumableArray(args));\n  };\n  const throttled = function () {\n    if (requestId == null) {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      requestId = raf(later(args));\n    }\n  };\n  throttled.cancel = () => {\n    raf.cancel(requestId);\n    requestId = null;\n  };\n  return throttled;\n}\nexport default throttleByAnimationFrame;","import { genComponentStyleHook, mergeToken } from '../../theme/internal';\n// ============================== Shared ==============================\nconst genSharedAffixStyle = token => {\n  const {\n    componentCls\n  } = token;\n  return {\n    [componentCls]: {\n      position: 'fixed',\n      zIndex: token.zIndexPopup\n    }\n  };\n};\n// ============================== Export ==============================\nexport default genComponentStyleHook('Affix', token => {\n  const affixToken = mergeToken(token, {\n    zIndexPopup: token.zIndexBase + 10\n  });\n  return [genSharedAffixStyle(affixToken)];\n});","import addEventListener from \"rc-util/es/Dom/addEventListener\";\nexport function getTargetRect(target) {\n  return target !== window ? target.getBoundingClientRect() : {\n    top: 0,\n    bottom: window.innerHeight\n  };\n}\nexport function getFixedTop(placeholderRect, targetRect, offsetTop) {\n  if (offsetTop !== undefined && targetRect.top > placeholderRect.top - offsetTop) {\n    return offsetTop + targetRect.top;\n  }\n  return undefined;\n}\nexport function getFixedBottom(placeholderRect, targetRect, offsetBottom) {\n  if (offsetBottom !== undefined && targetRect.bottom < placeholderRect.bottom + offsetBottom) {\n    const targetBottomOffset = window.innerHeight - targetRect.bottom;\n    return offsetBottom + targetBottomOffset;\n  }\n  return undefined;\n}\n// ======================== Observer ========================\nconst TRIGGER_EVENTS = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\nlet observerEntities = [];\nexport function getObserverEntities() {\n  // Only used in test env. Can be removed if refactor.\n  return observerEntities;\n}\nexport function addObserveTarget(target, affix) {\n  if (!target) {\n    return;\n  }\n  let entity = observerEntities.find(item => item.target === target);\n  if (entity) {\n    entity.affixList.push(affix);\n  } else {\n    entity = {\n      target,\n      affixList: [affix],\n      eventHandlers: {}\n    };\n    observerEntities.push(entity);\n    // Add listener\n    TRIGGER_EVENTS.forEach(eventName => {\n      entity.eventHandlers[eventName] = addEventListener(target, eventName, () => {\n        entity.affixList.forEach(targetAffix => {\n          targetAffix.lazyUpdatePosition();\n        });\n      });\n    });\n  }\n}\nexport function removeObserveTarget(affix) {\n  const observerEntity = observerEntities.find(oriObserverEntity => {\n    const hasAffix = oriObserverEntity.affixList.some(item => item === affix);\n    if (hasAffix) {\n      oriObserverEntity.affixList = oriObserverEntity.affixList.filter(item => item !== affix);\n    }\n    return hasAffix;\n  });\n  if (observerEntity && observerEntity.affixList.length === 0) {\n    observerEntities = observerEntities.filter(item => item !== observerEntity);\n    // Remove listener\n    TRIGGER_EVENTS.forEach(eventName => {\n      const handler = observerEntity.eventHandlers[eventName];\n      if (handler && handler.remove) {\n        handler.remove();\n      }\n    });\n  }\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport classNames from 'classnames';\nimport ResizeObserver from 'rc-resize-observer';\nimport omit from \"rc-util/es/omit\";\nimport React, { createRef, forwardRef, useContext } from 'react';\nimport { ConfigContext } from '../config-provider';\nimport throttleByAnimationFrame from '../_util/throttleByAnimationFrame';\nimport useStyle from './style';\nimport { addObserveTarget, getFixedBottom, getFixedTop, getTargetRect, removeObserveTarget } from './utils';\nfunction getDefaultTarget() {\n  return typeof window !== 'undefined' ? window : null;\n}\nvar AffixStatus;\n(function (AffixStatus) {\n  AffixStatus[AffixStatus[\"None\"] = 0] = \"None\";\n  AffixStatus[AffixStatus[\"Prepare\"] = 1] = \"Prepare\";\n})(AffixStatus || (AffixStatus = {}));\nlet InternalAffix = /*#__PURE__*/function (_React$Component) {\n  _inherits(InternalAffix, _React$Component);\n  var _super = _createSuper(InternalAffix);\n  function InternalAffix() {\n    var _this;\n    _classCallCheck(this, InternalAffix);\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      status: AffixStatus.None,\n      lastAffix: false,\n      prevTarget: null\n    };\n    _this.placeholderNodeRef = /*#__PURE__*/createRef();\n    _this.fixedNodeRef = /*#__PURE__*/createRef();\n    _this.getOffsetTop = () => {\n      const {\n        offsetBottom,\n        offsetTop\n      } = _this.props;\n      return offsetBottom === undefined && offsetTop === undefined ? 0 : offsetTop;\n    };\n    _this.getOffsetBottom = () => _this.props.offsetBottom;\n    // =================== Measure ===================\n    _this.measure = () => {\n      const {\n        status,\n        lastAffix\n      } = _this.state;\n      const {\n        onChange\n      } = _this.props;\n      const targetFunc = _this.getTargetFunc();\n      if (status !== AffixStatus.Prepare || !_this.fixedNodeRef.current || !_this.placeholderNodeRef.current || !targetFunc) {\n        return;\n      }\n      const offsetTop = _this.getOffsetTop();\n      const offsetBottom = _this.getOffsetBottom();\n      const targetNode = targetFunc();\n      if (!targetNode) {\n        return;\n      }\n      const newState = {\n        status: AffixStatus.None\n      };\n      const targetRect = getTargetRect(targetNode);\n      const placeholderRect = getTargetRect(_this.placeholderNodeRef.current);\n      const fixedTop = getFixedTop(placeholderRect, targetRect, offsetTop);\n      const fixedBottom = getFixedBottom(placeholderRect, targetRect, offsetBottom);\n      if (placeholderRect.top === 0 && placeholderRect.left === 0 && placeholderRect.width === 0 && placeholderRect.height === 0) {\n        return;\n      }\n      if (fixedTop !== undefined) {\n        newState.affixStyle = {\n          position: 'fixed',\n          top: fixedTop,\n          width: placeholderRect.width,\n          height: placeholderRect.height\n        };\n        newState.placeholderStyle = {\n          width: placeholderRect.width,\n          height: placeholderRect.height\n        };\n      } else if (fixedBottom !== undefined) {\n        newState.affixStyle = {\n          position: 'fixed',\n          bottom: fixedBottom,\n          width: placeholderRect.width,\n          height: placeholderRect.height\n        };\n        newState.placeholderStyle = {\n          width: placeholderRect.width,\n          height: placeholderRect.height\n        };\n      }\n      newState.lastAffix = !!newState.affixStyle;\n      if (onChange && lastAffix !== newState.lastAffix) {\n        onChange(newState.lastAffix);\n      }\n      _this.setState(newState);\n    };\n    _this.prepareMeasure = () => {\n      // event param is used before. Keep compatible ts define here.\n      _this.setState({\n        status: AffixStatus.Prepare,\n        affixStyle: undefined,\n        placeholderStyle: undefined\n      });\n      // Test if `updatePosition` called\n      if (process.env.NODE_ENV === 'test') {\n        const {\n          onTestUpdatePosition\n        } = _this.props;\n        onTestUpdatePosition === null || onTestUpdatePosition === void 0 ? void 0 : onTestUpdatePosition();\n      }\n    };\n    _this.updatePosition = throttleByAnimationFrame(() => {\n      _this.prepareMeasure();\n    });\n    _this.lazyUpdatePosition = throttleByAnimationFrame(() => {\n      const targetFunc = _this.getTargetFunc();\n      const {\n        affixStyle\n      } = _this.state;\n      // Check position change before measure to make Safari smooth\n      if (targetFunc && affixStyle) {\n        const offsetTop = _this.getOffsetTop();\n        const offsetBottom = _this.getOffsetBottom();\n        const targetNode = targetFunc();\n        if (targetNode && _this.placeholderNodeRef.current) {\n          const targetRect = getTargetRect(targetNode);\n          const placeholderRect = getTargetRect(_this.placeholderNodeRef.current);\n          const fixedTop = getFixedTop(placeholderRect, targetRect, offsetTop);\n          const fixedBottom = getFixedBottom(placeholderRect, targetRect, offsetBottom);\n          if (fixedTop !== undefined && affixStyle.top === fixedTop || fixedBottom !== undefined && affixStyle.bottom === fixedBottom) {\n            return;\n          }\n        }\n      }\n      // Directly call prepare measure since it's already throttled.\n      _this.prepareMeasure();\n    });\n    return _this;\n  }\n  _createClass(InternalAffix, [{\n    key: \"getTargetFunc\",\n    value: function getTargetFunc() {\n      const {\n        getTargetContainer\n      } = this.context;\n      const {\n        target\n      } = this.props;\n      if (target !== undefined) {\n        return target;\n      }\n      return getTargetContainer !== null && getTargetContainer !== void 0 ? getTargetContainer : getDefaultTarget;\n    }\n    // Event handler\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      const targetFunc = this.getTargetFunc();\n      if (targetFunc) {\n        // [Legacy] Wait for parent component ref has its value.\n        // We should use target as directly element instead of function which makes element check hard.\n        this.timer = setTimeout(() => {\n          addObserveTarget(targetFunc(), this);\n          // Mock Event object.\n          this.updatePosition();\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      const {\n        prevTarget\n      } = this.state;\n      const targetFunc = this.getTargetFunc();\n      const newTarget = (targetFunc === null || targetFunc === void 0 ? void 0 : targetFunc()) || null;\n      if (prevTarget !== newTarget) {\n        removeObserveTarget(this);\n        if (newTarget) {\n          addObserveTarget(newTarget, this);\n          // Mock Event object.\n          this.updatePosition();\n        }\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({\n          prevTarget: newTarget\n        });\n      }\n      if (prevProps.offsetTop !== this.props.offsetTop || prevProps.offsetBottom !== this.props.offsetBottom) {\n        this.updatePosition();\n      }\n      this.measure();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.timer) {\n        clearTimeout(this.timer);\n        this.timer = null;\n      }\n      removeObserveTarget(this);\n      this.updatePosition.cancel();\n      // https://github.com/ant-design/ant-design/issues/22683\n      this.lazyUpdatePosition.cancel();\n    }\n    // =================== Render ===================\n  }, {\n    key: \"render\",\n    value: function render() {\n      const {\n        affixStyle,\n        placeholderStyle\n      } = this.state;\n      const {\n        affixPrefixCls,\n        rootClassName,\n        children\n      } = this.props;\n      const className = classNames(affixStyle && rootClassName, {\n        [affixPrefixCls]: !!affixStyle\n      });\n      let props = omit(this.props, ['prefixCls', 'offsetTop', 'offsetBottom', 'target', 'onChange', 'affixPrefixCls', 'rootClassName']);\n      // Omit this since `onTestUpdatePosition` only works on test.\n      if (process.env.NODE_ENV === 'test') {\n        props = omit(props, ['onTestUpdatePosition']);\n      }\n      return /*#__PURE__*/React.createElement(ResizeObserver, {\n        onResize: this.updatePosition\n      }, /*#__PURE__*/React.createElement(\"div\", Object.assign({}, props, {\n        ref: this.placeholderNodeRef\n      }), affixStyle && /*#__PURE__*/React.createElement(\"div\", {\n        style: placeholderStyle,\n        \"aria-hidden\": \"true\"\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: className,\n        ref: this.fixedNodeRef,\n        style: affixStyle\n      }, /*#__PURE__*/React.createElement(ResizeObserver, {\n        onResize: this.updatePosition\n      }, children))));\n    }\n  }]);\n  return InternalAffix;\n}(React.Component);\nInternalAffix.contextType = ConfigContext;\nconst Affix = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    prefixCls: customizePrefixCls,\n    rootClassName\n  } = props;\n  const {\n    getPrefixCls\n  } = useContext(ConfigContext);\n  const affixPrefixCls = getPrefixCls('affix', customizePrefixCls);\n  const [wrapSSR, hashId] = useStyle(affixPrefixCls);\n  const AffixProps = Object.assign(Object.assign({}, props), {\n    affixPrefixCls,\n    rootClassName: classNames(rootClassName, hashId)\n  });\n  return wrapSSR( /*#__PURE__*/React.createElement(InternalAffix, Object.assign({}, AffixProps, {\n    ref: ref\n  })));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Affix.displayName = 'Affix';\n}\nexport default Affix;","import React, { useEffect, useRef, useState } from 'react'\r\nimport style from './index.module.scss'\r\nimport { Affix, Button, Radio, Space, message } from 'antd'\r\nimport type { RadioChangeEvent } from 'antd'\r\nimport type { FormInstance } from 'antd/lib/form/hooks/useForm'\r\nimport dayjs from 'dayjs'\r\nimport BasicInfo from './components/BasicInfo'\r\nimport AbilityInfo from './components/AbilityInfo'\r\nimport Concurrency from './components/Concurrency'\r\nimport UploadForm from './components/UploadForm'\r\nimport AccountInfo from './components/AccountInfo'\r\nimport ConfirmModal from './components/ConfirmModal'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { dateFormat } from '@utils/date'\r\nimport { getdictionary } from '@api/index'\r\nimport { useStore } from '@stores/index'\r\nimport {\r\n  TAccessForm,\r\n  TBasicInfo,\r\n  TAbilityInfo,\r\n  TConcurrency,\r\n  TUploadForm\r\n} from './index.d'\r\n// import { saveTAppInfo } from '@api/accessForm'\r\n\r\nconst offsetTop = 64 // 固钉高度\r\n\r\nconst AccessForm = () => {\r\n  /**\r\n   * mobx存储数据字典\r\n   */\r\n  const { accessFormStore } = useStore()\r\n\r\n  const navigate = useNavigate()\r\n\r\n  const [formState, setFormState] = useState(0)\r\n\r\n  /**\r\n   * 初始化表单\r\n   */\r\n  useEffect(() => {\r\n    const { state, id } = accessFormStore.current\r\n    setFormState(state)\r\n    if (!state) navigate(-1)\r\n\r\n    /**\r\n     * 获取表单所需的数据字典\r\n     */\r\n    if (!accessFormStore.dictionary) {\r\n      ;(async () => {\r\n        const { data } = await getdictionary({\r\n          showType: 'appAccess'\r\n        })\r\n        accessFormStore.setDictionary(data)\r\n      })()\r\n    }\r\n    /**\r\n     * 获取表单数据\r\n     */\r\n    if (id) {\r\n      ;(async () => {\r\n        // const { data } = await handlerRequest({id})\r\n        // setFormData(data)\r\n      })()\r\n    }\r\n  }, [])\r\n\r\n  type TOptions = {\r\n    label: string\r\n    value: '0' | '1' | '2' | '3' | '4'\r\n  }\r\n\r\n  const options: TOptions[] = [\r\n    { label: '基本信息', value: '0' },\r\n    { label: '基础能力信息', value: '1' },\r\n    { label: '并发配置', value: '2' },\r\n    { label: '上传申请表', value: '3' },\r\n    { label: '正式账号信息', value: '4' }\r\n  ]\r\n\r\n  /**\r\n   * 整合各个表单数据\r\n   */\r\n  const [formData, setFormData] = useState<TAccessForm>()\r\n\r\n  const basicInfoRef = useRef<FormInstance | null>(null) // 基本信息表单Ref\r\n  const abilityInfoRef = useRef<FormInstance | null>(null) // 基础能力信息Ref\r\n  const concurrencyRef = useRef<{\r\n    sitRef: React.MutableRefObject<FormInstance | null>\r\n    prodRef: React.MutableRefObject<FormInstance | null>\r\n  }>(null) // 并发配置Ref\r\n  const uploadFormRef = useRef<FormInstance | null>(null) // 上传申请表Ref\r\n  const AccountInfoRef = useRef<FormInstance | null>(null) // 正式账号信息Ref\r\n  /**\r\n   * 表单渲染\r\n   */\r\n  const renderForm = (value: TOptions['value']) => {\r\n    return (\r\n      <>\r\n        <BasicInfo ref={basicInfoRef} params={{ value }} />\r\n        <AbilityInfo ref={abilityInfoRef} params={{ value }} />\r\n        <Concurrency ref={concurrencyRef} params={{ value }} />\r\n        <UploadForm ref={uploadFormRef} params={{ value }} />\r\n        <AccountInfo ref={AccountInfoRef} params={{ value }} />\r\n      </>\r\n    )\r\n  }\r\n\r\n  const [value, setValue] = useState<TOptions['value']>('0')\r\n  /**\r\n   * 切换表单信息\r\n   */\r\n  const onChange = (e: RadioChangeEvent) => {\r\n    const { value } = e.target\r\n    setValue(value)\r\n    renderForm(value)\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  /**\r\n   * 校验表单\r\n   * @param {Ref} ref : 表单Ref\r\n   * @returns {boolean} 返回当前表单是否录入所有必填项\r\n   */\r\n  const validateForm = async (\r\n    ref: React.MutableRefObject<FormInstance | null>\r\n  ) => {\r\n    if (!ref || !ref.current) return false\r\n    try {\r\n      await ref.current.validateFields()\r\n      return true\r\n    } catch (error) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 校验所有表单必填项\r\n   * @returns {boolean} 返回所有表单是否录入所有必填项\r\n   */\r\n  const validateAllForms = async () => {\r\n    const isBasicInfoPermitted = await validateForm(basicInfoRef!)\r\n    if (!isBasicInfoPermitted) {\r\n      message.warning('请补充【基本信息】中的必填项')\r\n      return false\r\n    }\r\n    const isAbilityInfoPermitted = await validateForm(abilityInfoRef!)\r\n    if (!isAbilityInfoPermitted) {\r\n      message.warning('请补充【基础能力信息】中的必填项')\r\n      return false\r\n    }\r\n    const isConcurrencyTestPermitted = await validateForm(\r\n      concurrencyRef.current!.sitRef\r\n    )\r\n    if (!isConcurrencyTestPermitted) {\r\n      message.warning('请补充【并发配置】测试环境中的必填项')\r\n      return false\r\n    }\r\n    const isConcurrencyProductionPermitted = await validateForm(\r\n      concurrencyRef.current!.sitRef\r\n    )\r\n    if (!isConcurrencyProductionPermitted) {\r\n      message.warning('请补充【并发配置】正式环境中的必填项')\r\n      return false\r\n    }\r\n    const isUploadFormPermitted = await validateForm(uploadFormRef!)\r\n    if (!isUploadFormPermitted) {\r\n      message.warning('请补充【上传申请表】中的内容')\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 保存草稿\r\n   */\r\n  const onSave = async () => {\r\n    const params: TBasicInfo & TAbilityInfo & TConcurrency & TUploadForm = {\r\n      ...basicInfoRef.current?.getFieldsValue(),\r\n      ...abilityInfoRef.current?.getFieldsValue(),\r\n      ...concurrencyRef.current?.sitRef.current?.getFieldsValue(),\r\n      ...concurrencyRef.current?.prodRef.current?.getFieldsValue(),\r\n      ...uploadFormRef.current?.getFieldsValue()\r\n    }\r\n    params.serviceVaildEnd = dayjs(params.serviceVaildEnd).format(dateFormat)\r\n    console.log(params)\r\n    // const { data } = await saveTAppInfo(params)\r\n    // console.log(data)\r\n  }\r\n\r\n  /**\r\n   * 控制二次确认提交审核Modal显示隐藏\r\n   */\r\n  const [open, setOpen] = useState(false)\r\n\r\n  /**\r\n   * 提交审核\r\n   */\r\n  const onSubmit = () => {\r\n    if (!validateAllForms()) return false\r\n\r\n    console.log({\r\n      basicInfo: basicInfoRef.current?.getFieldsValue(),\r\n      abilityInfo: abilityInfoRef.current?.getFieldsValue(),\r\n      concurrency: {\r\n        sit: concurrencyRef.current?.sitRef.current?.getFieldsValue(),\r\n        prod: concurrencyRef.current?.prodRef.current?.getFieldsValue()\r\n      },\r\n      uploadForm: uploadFormRef.current?.getFieldsValue()\r\n    })\r\n\r\n    setFormData({\r\n      basicInfo: basicInfoRef.current?.getFieldsValue(),\r\n      abilityInfo: abilityInfoRef.current?.getFieldsValue(),\r\n      concurrency: {\r\n        sit: concurrencyRef.current?.sitRef.current?.getFieldsValue(),\r\n        prod: concurrencyRef.current?.prodRef.current?.getFieldsValue()\r\n      },\r\n      uploadForm: uploadFormRef.current?.getFieldsValue()\r\n    })\r\n    setOpen(true)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Affix offsetTop={offsetTop}>\r\n        <div className={style.header}>\r\n          <Radio.Group\r\n            options={options}\r\n            onChange={onChange}\r\n            value={value}\r\n            optionType='button'\r\n            buttonStyle='solid'\r\n          />\r\n          {formState !== 2 && (\r\n            <Space>\r\n              <Button type='primary' onClick={onSubmit}>\r\n                提交审核\r\n              </Button>\r\n              <Button onClick={() => onSave()}>保存草稿</Button>\r\n            </Space>\r\n          )}\r\n        </div>\r\n      </Affix>\r\n      {renderForm(value)}\r\n      {open && <ConfirmModal open={open} setOpen={setOpen} data={formData!} />}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AccessForm\r\n"],"names":["throttleByAnimationFrame","fn","requestId","later","args","_toConsumableArray","throttled","_len","_key","raf","genSharedAffixStyle","token","componentCls","useStyle","genComponentStyleHook","affixToken","mergeToken","getTargetRect","target","getFixedTop","placeholderRect","targetRect","offsetTop","getFixedBottom","offsetBottom","targetBottomOffset","TRIGGER_EVENTS","observerEntities","addObserveTarget","affix","entity","item","eventName","addEventListener","targetAffix","removeObserveTarget","observerEntity","oriObserverEntity","hasAffix","handler","getDefaultTarget","window","AffixStatus","InternalAffix","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","state","status","None","lastAffix","prevTarget","placeholderNodeRef","createRef","fixedNodeRef","getOffsetTop","props","undefined","getOffsetBottom","measure","onChange","targetFunc","getTargetFunc","Prepare","current","targetNode","newState","fixedTop","fixedBottom","top","left","width","height","affixStyle","position","placeholderStyle","bottom","setState","prepareMeasure","updatePosition","lazyUpdatePosition","_createClass","key","value","getTargetContainer","context","timer","setTimeout","prevProps","newTarget","clearTimeout","cancel","affixPrefixCls","rootClassName","children","className","classNames","omit","_jsx","ResizeObserver","_jsxs","Object","assign","ref","React","Component","contextType","ConfigContext","Affix","forwardRef","prefixCls","customizePrefixCls","getPrefixCls","useContext","wrapSSR","hashId","AffixProps","Affix$1","AccessForm","accessFormStore","useStore","navigate","useNavigate","formState","setFormState","useState","useEffect","id","dictionary","data","getdictionary","showType","setDictionary","options","label","formData","setFormData","basicInfoRef","useRef","abilityInfoRef","concurrencyRef","uploadFormRef","AccountInfoRef","renderForm","_Fragment","BasicInfo","AbilityInfo","Concurrency","UploadForm","AccountInfo","setValue","e","validateForm","validateFields","validateAllForms","sitRef","message","warning","onSave","params","getFieldsValue","prodRef","serviceVaildEnd","dayjs","format","dateFormat","console","log","open","setOpen","onSubmit","basicInfo","abilityInfo","concurrency","sit","prod","uploadForm","style","header","Radio","Space","Button","ConfirmModal"],"mappings":"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"}