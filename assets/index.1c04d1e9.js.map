{"version":3,"file":"index.1c04d1e9.js","sources":["../../src/pages/AccessForm/components/AccountInfo/index.tsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport {\r\n  Divider,\r\n  Form,\r\n  Input,\r\n  Radio,\r\n  Space,\r\n  Upload,\r\n  Typography,\r\n  Row,\r\n  Col,\r\n  Button\r\n} from 'antd'\r\nimport type { RadioChangeEvent } from 'antd'\r\nimport {\r\n  LoadingOutlined,\r\n  PlusOutlined,\r\n  ExclamationCircleOutlined,\r\n  UploadOutlined\r\n} from '@ant-design/icons'\r\nimport { useStore } from '@stores/index'\r\nimport type { FormInstance } from 'antd/lib/form/hooks/useForm'\r\nimport { formProps } from '..'\r\nimport { UploadFile } from 'antd/lib/upload/interface'\r\nimport type { UploadRequestOption } from 'rc-upload/lib/interface'\r\nimport { imgBeforeUpload } from '@utils/index'\r\nimport { TValue } from '../../index.d'\r\n\r\nconst { TextArea } = Input\r\nconst { Text } = Typography\r\n\r\nconst AccountInfo = React.forwardRef<\r\n  FormInstance,\r\n  { params: { value: TValue } }\r\n>(({ params }, ref) => {\r\n  const { value } = params\r\n\r\n  const { accessFormStore } = useStore()\r\n\r\n  const isCheck = accessFormStore.current.state === 2\r\n\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  /**\r\n   * 正式应用截图\r\n   */\r\n  const [fileList, setFileList] = useState<UploadFile[]>([])\r\n\r\n  /**\r\n   * 覆盖默认的上传行为\r\n   */\r\n  const customRequest = (options: UploadRequestOption) => {}\r\n\r\n  const uploadButton = (\r\n    <div>\r\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n      <div style={{ marginTop: 8 }}>Upload</div>\r\n    </div>\r\n  )\r\n\r\n  const [radioValue, setRadioValue] = useState(1)\r\n\r\n  /**\r\n   * 切换方式\r\n   */\r\n  const onChange = (e: RadioChangeEvent) => {\r\n    setRadioValue(e.target.value)\r\n  }\r\n\r\n  /**\r\n   * 正式上线新闻通告截图\r\n   */\r\n  const [imgNotice, setImgNotice] = useState()\r\n\r\n  const { themeStore } = useStore()\r\n  const colorPrimary = themeStore.antdThemeColor\r\n\r\n  return (\r\n    <>\r\n      <Form\r\n        ref={ref}\r\n        name='accountInfo'\r\n        {...formProps}\r\n        initialValues={{}}\r\n        style={{ display: value === '4' ? 'block' : 'none' }}\r\n      >\r\n        <Divider />\r\n        <Form.Item\r\n          label='正式应用介绍'\r\n          name='description'\r\n          rules={[{ required: true }]}\r\n        >\r\n          {isCheck ? (\r\n            ''\r\n          ) : (\r\n            <TextArea\r\n              rows={4}\r\n              placeholder='请简要填写应用介绍'\r\n              showCount\r\n              maxLength={1000}\r\n            />\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item\r\n          label='正式应用截图'\r\n          name='picture'\r\n          rules={[{ required: true }]}\r\n        >\r\n          {isCheck ? (\r\n            ''\r\n          ) : (\r\n            <Upload\r\n              listType='picture-card'\r\n              fileList={fileList}\r\n              beforeUpload={imgBeforeUpload}\r\n              customRequest={customRequest}\r\n            >\r\n              {fileList.length >= 5 ? null : uploadButton}\r\n            </Upload>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item label='正式上线新闻通告'>\r\n          {isCheck ? (\r\n            ''\r\n          ) : (\r\n            <>\r\n              <Space style={{ color: colorPrimary, marginTop: 6 }}>\r\n                <ExclamationCircleOutlined />\r\n                <span>下列方式三选一即可，不填写可能影响审批结果</span>\r\n              </Space>\r\n              <Form.Item name='notice' noStyle>\r\n                <Radio.Group\r\n                  onChange={onChange}\r\n                  value={radioValue}\r\n                  style={{ width: '100%', marginTop: 20 }}\r\n                >\r\n                  <Row gutter={[0, 20]}>\r\n                    <Col span={24}>\r\n                      <Radio value={1} style={{ width: '100%' }}>\r\n                        <Text>方式一：粘贴网址链接</Text>\r\n                        <Input placeholder='请粘贴网址链接' />\r\n                      </Radio>\r\n                    </Col>\r\n                    <Col span={24}>\r\n                      <Radio value={2}>\r\n                        <Text>方式二：上传截图</Text>\r\n                        <Upload\r\n                          listType='picture-card'\r\n                          maxCount={1}\r\n                          showUploadList={false}\r\n                          beforeUpload={imgBeforeUpload}\r\n                          customRequest={customRequest}\r\n                        >\r\n                          {imgNotice ? (\r\n                            <img\r\n                              src={imgNotice}\r\n                              alt='avatar'\r\n                              style={{ maxWidth: '100%', maxHeight: '100%' }}\r\n                            />\r\n                          ) : (\r\n                            <div>\r\n                              <PlusOutlined />\r\n                              <div style={{ marginTop: 8 }}>选择图片</div>\r\n                            </div>\r\n                          )}\r\n                        </Upload>\r\n                      </Radio>\r\n                    </Col>\r\n                    <Col span={24}>\r\n                      <Radio value={3}>\r\n                        <Text>方式三：上传文件</Text>\r\n                        <br />\r\n                        <Upload\r\n                          maxCount={1}\r\n                          customRequest={customRequest}\r\n                          // fileList={fileList}\r\n                        >\r\n                          <Button icon={<UploadOutlined />}>Upload</Button>\r\n                        </Upload>\r\n                      </Radio>\r\n                    </Col>\r\n                  </Row>\r\n                </Radio.Group>\r\n              </Form.Item>\r\n            </>\r\n          )}\r\n        </Form.Item>\r\n      </Form>\r\n    </>\r\n  )\r\n})\r\n\r\nAccountInfo.displayName = 'AccountInfo'\r\n\r\nexport default AccountInfo\r\n"],"names":["TextArea","Input","Text","Typography","AccountInfo","React","forwardRef","params","ref","value","accessFormStore","useStore","isCheck","current","state","loading","setLoading","useState","fileList","setFileList","customRequest","options","uploadButton","_jsx","LoadingOutlined","PlusOutlined","marginTop","radioValue","setRadioValue","onChange","e","target","imgNotice","setImgNotice","themeStore","colorPrimary","antdThemeColor","_Fragment","Form","formProps","display","Divider","required","Upload","imgBeforeUpload","length","_jsxs","Space","color","ExclamationCircleOutlined","Radio","width","Row","Col","maxWidth","maxHeight","Button","UploadOutlined","displayName"],"mappings":"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"}